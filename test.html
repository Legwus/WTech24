<!DOCTYPE html>
<html lang="en">

<head>

    <meta charset="UTF-8">
    <title>Chat Messages</title>
</head>

<body>
    <div id="list-container"></div>

    <script>
        var xmlhttp = new XMLHttpRequest();
        xmlhttp.onreadystatechange = function () {
            if (xmlhttp.readyState == 4) {
                if (xmlhttp.status == 200) {
                    console.log(xmlhttp.responseText);

                    // JSON-Antwort parsen
                    let data = JSON.parse(xmlhttp.responseText);
                    console.log(data);

                    // HTML-Liste erzeugen
                    let listContainer = document.getElementById("list-container");
                    let ul = document.createElement("ul");

                    // Nachrichten durchlaufen und Listenelemente erzeugen
                    data.forEach((message) => {
                        let li = document.createElement("li");
                        let date = new Date(message.time); // Zeitstempel in lesbares Datum umwandeln
                        li.innerHTML = `<strong>${message.from}</strong>: ${message.msg} <em>(${date.toLocaleString()})</em>`;
                        ul.appendChild(li);
                    });

                    // Liste ins Dokument einf√ºgen
                    listContainer.appendChild(ul);

                } else {
                    console.error("Fehler (" + xmlhttp.status + "): " + xmlhttp.responseText);
                }
            }
        };

        xmlhttp.open("GET", "https://online-lectures-cs.thi.de/chat/test.json", true);
        xmlhttp.send();
    </script>
</body>

</html>

